<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Enhanced Filtering System</title>
</head>
<body>
    <h1>Enhanced Pricelist Filtering Test</h1>
    <div id="results"></div>
    
    <script src="scripts/pricing-config.js"></script>
    <script src="scripts/validate-pricelist.js"></script>
    
    <script>
        async function testEnhancedFiltering() {
            console.log('🧪 Testing IMPROVED Pricelist Filtering System');
            console.log('=================================================');
            
            // Enable debug mode
            window.DEBUG_PRICING = true;
            
            try {
                // Test recommended products first (the most important)
                console.log('\n⭐ Testing RECOMMENDED PRODUCTS (Individual Developer Licenses)...');
                const recommended = await getRecommendedProducts();
                console.log('\n🎯 FINAL RECOMMENDED PRODUCTS:');
                console.log('==============================');
                
                if (Object.keys(recommended).length > 0) {
                    Object.entries(recommended).forEach(([name, product]) => {
                        const version = product.version ? ` v${product.version}` : '';
                        const reason = product.reason || 'No reason provided';
                        console.log(`✅ ${name}${version}:`);
                        console.log(`   📦 ${product['Product Name']}`);
                        console.log(`   💰 €${product.Euro}`);
                        console.log(`   📝 ${reason}`);
                        console.log('');
                    });
                } else {
                    console.warn('❌ No recommended products found!');
                }
                
                // Test main validation function for full details
                console.log('\n📋 Running full validation for debugging...');
                const results = await validatePricelist();
                
                if (results) {
                    console.log('\n✅ Validation completed!');
                    console.log(`📊 Summary: ${Object.keys(results.filtered).length} categories, ${Object.keys(results.recommended).length} recommended`);
                } else {
                    console.error('❌ Validation failed');
                }
                
            } catch (error) {
                console.error('💥 Test failed:', error);
            }
        }
        
        // Run test when page loads
        document.addEventListener('DOMContentLoaded', testEnhancedFiltering);
    </script>
</body>
</html>
